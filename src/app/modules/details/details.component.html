<div class="app-details" *ngIf="selectedApp">
  <div class="app-header">
    <img [src]="selectedApp.image_url" alt="app icon" class="app-icon">
    <div class="app-info">
      <h1>{{selectedApp.title}}</h1>
      <p>{{selectedApp.creator}}</p>
      <div class="app-stats">
        <p style="margin-bottom: 0.5rem;">{{selectedApp.rating}} â˜…</p>
        <p>{{selectedApp.comments_ratings!.length}} {{'Reviews' | translate}} | {{selectedApp.downloads! | shorten }}<img style="margin-left: 0.2rem;margin-bottom: 0.2rem;width: 1.1rem; height: 1.3rem;" [src]="downloadIcon" alt="Download icon"></p>
      </div>
      <button (click)="downloadApp()">{{'Download' | translate}} {{selectedApp.size}}Mb</button>
    </div>
  </div>

  <div class="app-description">
    <h2>{{'Description' | translate}}</h2>
    <p>{{selectedApp.description}}</p>
  </div>

<div class="app-screenshots">
  <h2>{{'Screenshots' | translate}}</h2>
  <ngx-slick-carousel class="carousel" #slickModal="slick-carousel" [config]="slideConfig">
   <div ngxSlickItem *ngFor="let screenshot of selectedApp.screenshots; let i = index" class="slide">
    <img [src]="screenshot" alt="app screenshot" (click)="openLightbox(i)">
   </div>
  </ngx-slick-carousel>
</div>



   <div style="width: 80%">
    <h2>{{'Reviews' | translate}}</h2>
  </div>
  <div style="width: 80%">
    <div class="app-reviews">
      <ul style="flex-direction: column;">
        <!-- Use a slice pipe to show only the first three reviews -->
        <li *ngFor="let review of selectedApp.comments_ratings | slice:0:3" class="review">
          <p class="user">{{review.username}}</p>
          <div class="rating-container">
            <span class="rating-number"></span>
            <ngb-rating [(rate)]="review.rating" [max]="5" [readonly]="true"></ngb-rating>
            <time class="date">{{review.date_submitted | date:'dd/MM/yyyy'}}</time>
          </div>
          <p class="comment">{{review.comment}}</p>
        </li>
      </ul>
      <!-- Add a button to show all reviews in a modal -->
      <button *ngIf="selectedApp.comments_ratings!.length>3" class="show-all-button" (click)="showAllReviews()">{{'View all reviews' | translate}}</button>
    </div>


  <div style="width: 80%">
    <h2>{{'Details' | translate}}</h2>
    <ul>
      <li>{{'Size' | translate}}: {{selectedApp.size}}Mb</li>
      <li>{{'Version' | translate}}: {{selectedApp.version}}</li>
      <li>{{'Category' | translate}}: {{selectedApp.category! | translate}}</li>
      <li>{{'Developer' | translate}}: {{selectedApp.creator}}</li>
    </ul>
  </div>

  <!-- add a button element with a click event that calls the goBack function -->
  <button class="back-button" (click)="goBack()">{{'Back' | translate}}</button>

</div>

